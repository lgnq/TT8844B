#include "main.h"

code unsigned char ROMFONTDATA[][27] = 
{
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x66,0x66,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x66,0x66,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x66,0x66,0x00,0x66,0x66,0x00,0x66,0x66,0x00,0x66,0x66,0x66,0x66,0x66,0x00,0x66,0x66,0x00,0x66,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x67,0x00,0x31,0x66,0x00,0x17,0x66,0x00,0x11,0x66,0x00,0x71,0x76,0x00,0x13,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xC8,0xC8,0x00,0x6E,0x8E,0x00,0x66,0x88,0x00,0x66,0xE8,0x00,0x66,0x8C,0x00,0xE6,0xFF,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x67,0x00,0x00,0x66,0xC4,0x00,0x77,0xFF,0xFF,0x66,0x4C,0x00,0x76,0x00,0x00,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xC8,0x00,0x00,0x6E,0x00,0x32,0x66,0xFF,0xFF,0xEE,0x00,0x23,0x66,0x00,0x00,0xE6,0xFF,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x11,0x0F,0x31,0xFF,0xFF,0x67,0x11,0x00,0x66,0x11,0xF0,0x66,0x00,0x00,0x76,0x00,0x00,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x0F,0x88,0x00,0xFF,0xFF,0xC8,0x00,0x88,0x6E,0xF0,0x88,0x66,0x00,0x00,0x66,0x00,0x00,0xE6,0xFF,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x67,0x00,0x00,0x66,0x00,0x8F,0x66,0x00,0x88,0x66,0x00,0xF8,0x76,0x00,0x00,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xC8,0x00,0x00,0x6E,0x00,0x0F,0x6F,0x2E,0x00,0x66,0x22,0xF0,0xF6,0xE2,0x00,0xE6,0x00,0xFF,0x8C,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x70,0x00,0x31,0x0C,0x00,0x46,0x00,0x00,0x8C,0x00,0x00,0x88,0x00,0x00,0xC8,0x00,0x00,0x64,0x00,0x00,0x13,0xC0,0x00,0x00,0x07},
 {0xE0,0x00,0x00,0xFF,0xC8,0x00,0xFF,0xEE,0x00,0xFF,0xFF,0x00,0xFF,0xFF,0x00,0xFF,0xFF,0x00,0xFF,0xEE,0x00,0xFF,0x8C,0x00,0x0E,0x00,0x00},
 {0x00,0x00,0x10,0x00,0x40,0x71,0x00,0x12,0x08,0x00,0x22,0x00,0x11,0xCC,0x00,0x00,0x22,0x00,0x00,0x21,0x80,0x00,0x04,0x17,0x00,0x00,0x01},
 {0x80,0x00,0x00,0xE8,0x20,0x00,0x01,0x84,0x00,0x00,0x44,0x00,0x00,0x33,0x88,0x00,0x44,0x00,0x10,0x48,0x00,0x8E,0x02,0x00,0x08,0x00,0x00},
 {0x00,0x00,0x60,0x00,0x10,0xAE,0x00,0x63,0x22,0x70,0x8C,0x22,0x44,0x88,0x22,0x07,0xC8,0x22,0x00,0x36,0x22,0x00,0x01,0xEA,0x00,0x00,0x06},
 {0x00,0x00,0x00,0x00,0x13,0x80,0x00,0x4C,0xC8,0x32,0x26,0x44,0x11,0x22,0x44,0x23,0x62,0x44,0x00,0xC4,0x8C,0x00,0x31,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x60,0x00,0x10,0xAE,0x12,0x63,0x21,0x70,0x48,0xA4,0x44,0xBB,0x22,0x07,0x84,0x4A,0x21,0x36,0x12,0x00,0x01,0xEA,0x00,0x00,0x06},
 {0x00,0x00,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x77,0xFF,0xEE,0x00,0x00,0x00},
 {0x10,0x00,0x00,0x22,0x88,0x00,0x22,0x88,0x00,0x22,0xAD,0xA4,0xA6,0xAA,0xAA,0x8A,0x00,0x22,0x24,0x00,0x42,0x33,0xFF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x67,0x40,0x80,0x66,0x44,0x88,0x66,0x44,0x88,0x66,0x44,0x88,0x76,0x04,0x08,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xC8,0x80,0x40,0x6E,0x88,0x44,0x66,0x88,0x44,0x66,0x88,0x44,0x66,0x08,0x04,0xE6,0xFF,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x67,0xF0,0xF0,0x66,0xF0,0xF0,0x66,0x00,0x00,0x66,0x0F,0x0F,0x76,0x00,0x00,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xC8,0xF0,0xF0,0x6E,0xF0,0xF0,0x66,0x00,0x00,0x66,0x0F,0x0F,0x66,0x00,0x00,0xE6,0xFF,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x10,0x88,0x00,0x73,0x88,0x10,0xFF,0x88,0x13,0xFF,0x88,0x00,0x7F,0x88,0x00,0x13,0x88,0x00,0x00,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x11,0x80,0x00,0x11,0xEC,0x00,0x11,0xFF,0x80,0x11,0xFF,0x8C,0x11,0xEF,0x00,0x11,0x8C,0x00,0x01,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x72,0x00,0x10,0xFF,0xC8,0x73,0xFF,0xFE,0x07,0x0F,0x0F,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x77,0xFF,0xFF,0x13,0xFF,0xCE,0x00,0x7F,0x08,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x76,0x00,0xE6,0x13,0xF9,0x8C,0x77,0xFF,0xEE,0x00,0x66,0x00,0x77,0xFF,0xEE,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF6,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x66,0x00,0x00,0x00,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x10,0x90,0x80,0x01,0x89,0x88,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x10,0x80,0x11,0x99,0xE8,0x71,0xFF,0x8E,0x17,0x99,0xE8,0x71,0xFF,0x8E,0x17,0x99,0x88,0x01,0x08,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x10,0xF6,0x80,0x73,0x6F,0xEC,0x76,0x66,0x06,0x13,0xFF,0xC8,0x60,0x66,0x6E,0x37,0xF6,0xCE,0x01,0x6F,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x30,0x80,0x00,0x67,0xCC,0xE6,0x37,0xBD,0x8C,0x00,0xE7,0x00,0x31,0xBD,0xEC,0x67,0x33,0xE6,0x00,0x01,0x0C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x10,0xFE,0x00,0x33,0x11,0x88,0x13,0xB1,0x08,0x10,0xCE,0xC6,0x63,0x36,0x8C,0x66,0x31,0x88,0x13,0xEF,0x64,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x26,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xCC,0x00,0x33,0x08,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x33,0x80,0x00,0x01,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x80,0x00,0x01,0xCC,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x10,0xCC,0x00,0x33,0x08,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0xE7,0x08,0x01,0x08,0x00,0x10,0xF0,0x80,0x01,0x0F,0xCC,0x31,0xFE,0xCC,0x33,0x11,0xCC,0x13,0xEF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x00,0x30,0xF6,0xC0,0x03,0x6F,0x0C,0x00,0x66,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x26,0x00,0x00,0x04,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0xF0,0xC0,0x03,0x0F,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x10,0xCE,0x00,0x73,0x08,0x10,0xCE,0x00,0x73,0x08,0x00,0x06,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x33,0x21,0xCC,0x33,0x84,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE6,0x00,0x11,0xEE,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x11,0xFF,0x88,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x00,0x31,0x8C,0x00,0xE7,0x00,0x31,0x8C,0x00,0x33,0xFF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x00,0x71,0x8C,0x00,0x17,0xC8,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x31,0x88,0x00,0xF7,0x88,0x31,0x9D,0x88,0x33,0x11,0x88,0x33,0xFF,0xCC,0x00,0x11,0x88,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0xCC,0x33,0x00,0x00,0x33,0xFF,0x80,0x00,0x01,0xCC,0x30,0x10,0xCC,0x13,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x08,0x0C,0x33,0xF7,0x80,0x33,0x09,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0xCC,0x00,0x00,0xCC,0x00,0x31,0x8C,0x00,0x67,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x13,0xF9,0x8C,0x31,0x9F,0xC8,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x33,0x90,0xCC,0x01,0xFF,0xCC,0x30,0x10,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x06,0x00,0x00,0x60,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x06,0x00,0x00,0x60,0x00,0x00,0x26,0x00,0x00,0x04,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0xC0,0x00,0x31,0x8C,0x00,0xE7,0x00,0x31,0x8C,0x00,0x01,0xEC,0x00,0x00,0x37,0x80,0x00,0x01,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0xF0,0xC0,0x03,0x0F,0x0C,0x30,0xF0,0xC0,0x03,0x0F,0x0C,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x30,0x00,0x00,0x13,0xC8,0x00,0x00,0x7E,0x00,0x00,0x13,0xC8,0x00,0x73,0x08,0x10,0xCE,0x00,0x33,0x08,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x00,0x31,0x8C,0x00,0x67,0x00,0x00,0x06,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x21,0x0F,0x48,0x44,0x43,0xA2,0x44,0x88,0xAA,0x44,0x69,0xCA,0x12,0xF0,0x80,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF6,0x00,0x31,0x9F,0xC8,0x33,0x00,0xCC,0x33,0xFF,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0x80,0x33,0x01,0xCC,0x33,0xF1,0x8C,0x33,0x1F,0xC8,0x33,0x10,0xCC,0x33,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x33,0x00,0x00,0x33,0x00,0x00,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0x80,0x33,0x01,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x10,0xCC,0x33,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0xCC,0x33,0x00,0x00,0x33,0xF0,0x80,0x33,0x0F,0x08,0x33,0x00,0x00,0x33,0xFF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0xCC,0x33,0x00,0x00,0x33,0xF0,0x80,0x33,0x0F,0x08,0x33,0x00,0x00,0x33,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x33,0x30,0xC0,0x33,0x03,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0xF0,0xCC,0x33,0x0F,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x11,0xFF,0x88,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x11,0xFF,0x88,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x77,0xCC,0x00,0x11,0x88,0x00,0x11,0x88,0x00,0x11,0x88,0x33,0xB1,0x88,0x01,0xEF,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x10,0xCC,0x33,0x73,0x08,0x33,0xCE,0x00,0x33,0xEC,0x00,0x33,0x37,0x80,0x33,0x01,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0x00,0x33,0x00,0x00,0x33,0x00,0x00,0x33,0x00,0x00,0x33,0x00,0x00,0x33,0xFF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x76,0x00,0xE6,0x77,0xF9,0xEE,0x66,0x6F,0x66,0x66,0x06,0x66,0x66,0x00,0x66,0x66,0x00,0x66,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x80,0xCC,0x33,0xC8,0xCC,0x33,0x6C,0xCC,0x33,0x36,0xCC,0x33,0x13,0xCC,0x33,0x01,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0x80,0x33,0x01,0xCC,0x33,0xF1,0x8C,0x33,0x0F,0x00,0x33,0x00,0x00,0x33,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x33,0x00,0xCC,0x33,0x64,0xCC,0x33,0x93,0x8C,0x01,0xEF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0x80,0x33,0x01,0xCC,0x33,0xF1,0x8C,0x33,0x6F,0x00,0x33,0x37,0x80,0x33,0x01,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFF,0x80,0x33,0x09,0xCC,0x13,0xE8,0x00,0x30,0x17,0xC8,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0xCC,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x11,0x99,0x88,0x00,0xFF,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x66,0x76,0xF6,0xE6,0x13,0x9F,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x10,0xFF,0x80,0x33,0x09,0xCC,0x33,0x00,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0xCC,0x33,0x00,0xCC,0x13,0xF9,0x8C,0x00,0x6F,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0xFF,0xCC,0x00,0x10,0xCC,0x00,0x73,0x08,0x10,0xCE,0x00,0x33,0x08,0x00,0x33,0xFF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x70,0xE0,0x00,0x67,0x0E,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x76,0xE0,0x00,0x07,0x0E,0x00},
 {0x00,0x00,0x00,0x00,0xE7,0x08,0x01,0x08,0x00,0x00,0xF0,0x00,0x31,0x9F,0xC8,0x33,0xF0,0xCC,0x33,0x90,0xC0,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x70,0xE0,0x00,0x07,0x6E,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x70,0xE6,0x00,0x07,0x0E},
 {0x00,0x00,0x00,0x00,0xE7,0x08,0x01,0x08,0x00,0x00,0xE0,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0xE7,0x08,0x01,0x08,0x00,0x00,0xF0,0x00,0x31,0x9F,0xC8,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0xE7,0x08,0x01,0x08,0x00,0x30,0x00,0xC0,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xEF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xF0,0x80,0x01,0x0F,0xCC,0x31,0xFE,0xCC,0x33,0x11,0xCC,0x13,0xEF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0x00,0x33,0x70,0x00,0x33,0x9F,0xC8,0x33,0x00,0xCC,0x33,0x90,0xCC,0x33,0x7F,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x80,0x31,0x8F,0xCC,0x33,0x00,0x00,0x33,0x80,0xC0,0x01,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xCC,0x00,0xE0,0xCC,0x31,0x9F,0xCC,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xEF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x31,0x9F,0xC8,0x33,0xF0,0xCC,0x33,0x90,0xC0,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x73,0x88,0x10,0xF6,0x80,0x01,0x6F,0x08,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xFE,0xCC,0x33,0x01,0xCC,0x13,0xF1,0xCC,0x00,0x0E,0xCC,0x10,0xF1,0x8C,0x01,0x0F,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0x00,0x33,0x30,0x00,0x33,0xD7,0xC8,0x33,0x08,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x00,0x00,0xE0,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x88,0x00,0x30,0x80,0x00,0x11,0x88,0x00,0x11,0x88,0x30,0x11,0x88,0x13,0xFB,0x08,0x00,0x0E,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x00,0x00,0x33,0x00,0xC0,0x33,0x31,0x8C,0x33,0xE7,0x00,0x33,0xBF,0x80,0x33,0x01,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x6E,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x66,0x80,0x00,0x37,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0xF0,0x80,0x33,0x6F,0xCC,0x33,0x66,0xCC,0x33,0x66,0xCC,0x33,0x66,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x70,0x00,0x33,0x9F,0xC8,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x31,0x9F,0xC8,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x70,0x00,0x33,0x9F,0xC8,0x33,0x90,0xCC,0x33,0x7F,0x08,0x33,0x00,0x00,0x03,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xC0,0x31,0x9F,0xCC,0x33,0x90,0xCC,0x01,0xEF,0xCC,0x00,0x00,0xCC,0x00,0x00,0x0C},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x70,0x00,0x33,0xDF,0xC8,0x33,0x08,0x0C,0x33,0x00,0x00,0x33,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x31,0x0F,0xC8,0x13,0xF0,0x80,0x30,0x00,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x00,0x10,0xF6,0x80,0x01,0x6F,0x08,0x00,0x66,0x00,0x00,0x66,0x00,0x00,0x37,0x88,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0xC0,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x90,0xCC,0x01,0xEF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0xC0,0x33,0x00,0xCC,0x11,0x99,0x88,0x00,0xFF,0x00,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x60,0xC0,0x33,0x66,0xCC,0x33,0x66,0xCC,0x33,0xF6,0xCC,0x01,0x9F,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0xC0,0x33,0x90,0xCC,0x01,0xFF,0x08,0x31,0x9F,0xC8,0x33,0x00,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0xC0,0x33,0x00,0xCC,0x13,0xF9,0xCC,0x00,0x0F,0xCC,0x10,0xF1,0x8C,0x01,0x0F,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0xF0,0xC0,0x03,0x1F,0xCC,0x00,0x73,0x08,0x10,0xCE,0x00,0x33,0xFF,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x80,0x31,0x8F,0xCC,0x33,0x00,0x00,0x33,0x80,0xC0,0x01,0xFF,0x8C,0x00,0x61,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x06,0x00,0x30,0xF0,0xC0,0x03,0x0F,0x0C,0x00,0x60,0x00,0x00,0x06,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x30,0xFC,0xCC,0x03,0x03,0x00,0x30,0x70,0x00,0x33,0x9F,0xC8,0x33,0x00,0xCC,0x33,0x00,0xCC,0x33,0x00,0xCC,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x37,0x80,0x00,0x01,0xEC,0x00,0x00,0x37,0x80,0x00,0x01,0xEC,0x00,0x00,0x06,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x32,0x00,0x00,0x23,0xC8,0x00,0x22,0x04,0x00,0x22,0x00,0x31,0xEE,0x00,0x13,0xCE,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x66,0x60,0x37,0xF6,0xCE,0x01,0xFF,0x08,0x10,0xFF,0x80,0x73,0x6F,0xEC,0x06,0x66,0x06,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x10,0x90,0x80,0x11,0x19,0x08,0x00,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x66,0x00,0x00,0x60,0x00,0x00,0xE6,0x00,0x31,0x8C,0x00,0x33,0x90,0xCC,0x01,0xFF,0x08,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x66,0x00,0x31,0xFF,0xC8,0x67,0x66,0x0E,0x66,0x66,0x00,0x76,0x66,0xE0,0x13,0xFF,0x8C,0x00,0x66,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x31,0xC8,0x20,0x67,0x7E,0xE6,0x04,0x13,0x8C,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x43,0x2C,0x00,0xAB,0x59,0x00,0xAB,0x59,0x00,0x4A,0x25,0x00,0x03,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x17,0x1D,0x5B,0x11,0x11,0x15,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x43,0x80,0x00,0x34,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x62,0x00,0x00,0x22,0x00,0x42,0x22,0x10,0x08,0x07,0x42,0xC0,0x10,0x09,0x22,0x42,0x00,0x84,0x00,0x11,0xE0,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x10,0xFF,0xEC,0x11,0x8C,0x06,0x11,0xF8,0x80,0x77,0xCF,0xCC,0x11,0x88,0x00,0x51,0x88,0x00,0x77,0xFF,0xEE,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x66,0xE0,0x00,0x66,0xAC,0x8F,0x66,0x00,0x88,0x66,0xCA,0xF8,0x66,0x0E,0x00,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xC8,0x00,0x70,0x66,0x1F,0x53,0x66,0x11,0x00,0x66,0xF1,0x35,0x66,0x00,0x07,0x66,0xFF,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x80,0x00,0x00,0x24,0x00,0x00,0x71,0x63,0x0F,0x0F,0x55,0x0F,0x0F,0x55,0x00,0x00,0x55,0xF0,0xF0,0x36,0xF0,0xF0,0x00,0x00,0x00},
 {0x10,0x00,0x00,0x42,0x00,0x00,0xE8,0x00,0x00,0x0F,0x0F,0x6C,0x0F,0x0F,0xAA,0x00,0x00,0xAA,0xF0,0xF0,0xAA,0xF0,0xF0,0xC6,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x63,0x0F,0x00,0x44,0x00,0x00,0x44,0xF0,0x21,0x75,0x08,0x44,0x13,0x00,0x44,0x11,0x00,0x12,0x89,0xF8,0x03,0x08,0x00},
 {0x00,0x00,0x00,0x1F,0x91,0x8C,0x00,0x89,0x24,0xF0,0xC8,0x22,0x00,0x26,0x42,0x00,0x22,0x08,0x00,0x22,0x00,0xF0,0xC6,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x33,0x30,0x10,0x33,0x44,0xAA,0x33,0x44,0x89,0x33,0x44,0xAA,0x33,0x03,0x01,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xC8,0x90,0xC0,0xCC,0x55,0x22,0xCC,0x91,0x22,0xCC,0x55,0x22,0xCC,0x09,0x0C,0xCC,0xFF,0xFF,0x8C,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x31,0xFF,0xFF,0x33,0x70,0x50,0x33,0x44,0x55,0x33,0x47,0x22,0x33,0x44,0x55,0x33,0x07,0x05,0x13,0xFF,0xFF,0x00,0x00,0x00},
 {0x00,0x00,0x00,0xFF,0xFF,0xEC,0x70,0x70,0x66,0x22,0x22,0x66,0x22,0x22,0x66,0x22,0x22,0x66,0x07,0x02,0x66,0xFF,0xFF,0xCE,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x47,0x00,0x00,0x44,0x00,0x00,0x44,0x00,0x00,0x44,0x00,0x00,0x44,0x00,0x00,0x44,0x00,0x00,0x74,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x0F,0x0F,0x0F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0xF0,0xF0,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x0F,0x0F,0x0F,0xFF,0xCC,0x00,0xFF,0xCC,0x00,0xFF,0xCC,0x00,0xFF,0xCC,0x00,0xFF,0xCC,0x00,0xF0,0xF0,0xF0,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x0F,0x0F,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0xF0,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x2E,0x00,0x00,0x22,0x00,0x00,0x22,0x00,0x00,0x22,0x00,0x00,0x22,0x00,0x00,0x22,0x00,0x00,0xE2,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x96,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x01,0x7E,0x00,0x00,0x01,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0xF6,0x00,0x01,0x09,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x30,0xFC,0xCC,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x10,0x90,0x80,0x01,0x09,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF}
};

code unsigned char tw884x_settings[] = 
{
    // init with NTSC

	// DTV field detection setting
	0xFF, 0x00, // Page 0
	0x50, 0x80,		// field detection by window
	0x54, 0x01,		// start 64
	0x58, 0x80,		// field detection by window
	0x5C, 0x01,		// start 64
	0xB0, 0x80,		// field detection by window
	0xB4, 0x01,		// start 64
	0xB8, 0x80,		// field detection by window
	0xBC, 0x01,		// start 64
    
	//===== TW8844 PLL
	0xFF, 0x00, // Page 0
	0xD8, 0x06,		//0x00, itune=6
	0xDA, 0x06,		//0x00, itune=6
	0xDB, 0x00,
	0xDC, 0x06,		//0x00, itune=6
	0xE1, 0x04,			//0x08,
	0xE2, 0x01,			//new
	0xE3, 0x2C,			//0x0E,
	0xE9, 0x04,			//0x08,
	0xEA, 0x01,			//new
	0xEB, 0x2C,			//0x0E,

	0xF0, 0x40, // *(43)
	0xF1, 0x18, // *(18)
	0xF2, 0x00,
	0xF3, 0x07, // *(0B)
	0xF4, 0x40,
	0xF5, 0x43,
	0xF6, 0x28,
	0xFE, 0x04,

	//===== TW8844 AFE-Differential
	0xFF, 0x01,	// Page 1 AFE-Differential
	0x09, 0xF1,			// Decoder V crop must odd number
	0x1C, 0x08,			// select std as NTSC
	0x1D, 0x01,			// enable format only NTSC
	0x2F, 0xE6,			// make blue screen, auto
	0x33, 0x85,			// Decoder Freerun 60Hz
	0x36, 0xB1,			// CM Clamp - Balnking Period
	0x37, 0x47,
	0x39, 0x10,

	//===== TW8844 Output timing
	0xFF, 0x02, // Page 2
	0x16, 0x07,
	0x17, 0x80,			// width 1920
	0x1E, 0x02,
	0x1F, 0xD0,			// height 720

	0x28, 0x08,
	0x29, 0xFC,			// HTotal - 2300
	0x2a, 0x02,			// Free Run AUTO
	0x2b, 0x22,			// Mute Auto
	
	0x5A, 0x07,			// Output DE length control for line split mode
	0x5B, 0x80,			// new to TW8844B

	//===== TW8844 VP1 Scaler
	0xFF, 0x00, // Page 0
	0x07, 0x83,				// swap R<->B for LG panel
	0x08, 0x30,				// all output 0, change it 0x20 after initialize


	//===== TW8844 LVDS-TX/RX
	0xFF, 0x06, // Page 6
	0x40, 0x0C,
	0x41, 0x42,
	0x42, 0x41,
	0x43, 0x03,
	0x45, 0x0F,
	0x46, 0xE1,
	0x47, 0x80,
	0x50, 0x0C,
	0x52, 0x41,
	0x53, 0x00,
	0x54, 0x1F,
	0x55, 0xFF,
	0x57, 0x80,
	
//	0xff, 0x05,
//	0x88, 0x04,			// measure 2 even field

	0xff, 0xff	
};

code unsigned char tw884x_dtva24bit[] = 
{
	0xFF, 0x00, // Page 0
	//===== DTVA settings - 24bit RGB
	0x0A, 0x88,			// DTVA1 24bit RGB
	0x50, 0x87,			//0x07,
	0x51, 0x08,			// 0x28, NOT DE from HS
	0x52, 0x02,
	0x53, 0x05,

	0xff, 0xff	
};

void tw884x_write(unsigned char idx, unsigned char val)
{
    i2c_start();                        //起始条件，开始数据通信  

    //发送地址和数据读写方向  
    //低位为0，表示写数据  
    i2c_write_byte((TW884X_ADDR << 1) | 0);  
    
    //写入索引  
    i2c_write_byte(idx);  

    //写入数据  
    i2c_write_byte(val);
    
    i2c_stop();                     //终止条件，结束数据通信      
}

unsigned char tw884x_read(unsigned char idx)
{
    unsigned char val;
    
    i2c_start();                        //起始条件，开始数据通信  

    //发送地址和数据读写方向  
    //低位为0，表示写数据  
    i2c_write_byte((TW884X_ADDR << 1) | 0);  
    
    //写入索引  
    i2c_write_byte(idx);  

    i2c_restart();                        //起始条件，开始数据通信  

    //发送地址和数据读写方向  
    //低位为1，表示读数据  
    i2c_write_byte((TW884X_ADDR << 1) | 1);  
    
    //读入数据  
    val = i2c_read_byte();
    
    i2c_stop();                     //终止条件，结束数据通信  

    return val;
}

void tw884x_reset(void)
{
    unsigned int i;
    
    LED_R = 1;
    LED_G = 1;
    TW_HWRESET = 1;					//Reset for Devices
    
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }
    for (i = 0; i < 0xFFFF; i++)
    {
        ;
    }  
    
    LED_R = 0;
    LED_G = 0;
    TW_HWRESET = 0;					//Reset for Devices    
}

void device_initialize(unsigned char *settings)
{
	unsigned char index, val;

	while ((settings[0] != 0xFF) || (settings[1] != 0xFF)) // 0xff, 0xff is end of data
    {           
		index = *settings;
		val   = *(settings+1);
        
		tw884x_write(index, val);
        
		settings += 2;
	}
}

void tw884x_init(void)
{
    unsigned char id;
    
    tw884x_reset();
         
    tw884x_write(0xFF, 0x0);
    id = tw884x_read(0x0);
    
    if (id == 0x44)
    {
        LED_G = 1;
        
        device_initialize(tw884x_settings);
        device_initialize(tw884x_dtva24bit);

		fosd_enable(1);

		fosd_win_enable(0, 0);					// Window 0 for channel
		fosd_win_screen(0, 50, 10, 20, 2, 1, 1);
		fosd_win_ram_start(0, 0);

		fosd_win_enable(1, 0);					// Window 1 for information
		fosd_win_screen(1, 200, 200, 40, 5, 1, 1);
		fosd_win_style(1, 1, 2, 1, 8, 5, 0, 5);
		fosd_win_ram_start(1, 40);       

        fosd_download_font_direct(0, &ROMFONTDATA[0][0], 161, 12, 18);         // font can download with correct scaler setting

        fosd_win_alpha(1, 0, 6);                  // Win1 for informatin, background color, transparent 6
        fosd_win_alpha(0, 0, 8);                  // background color clear
        fosd_win_enable(0, 1);                    // Window 0 enable for display

        LED_G = 0;
    }
    else
    {
        LED_G = 0;
    }
}

void WaitVBlankVS1(unsigned char cnt)
{
	unsigned char i;
	unsigned int loop;

    tw884x_write(0xFF, 0x0);

	for (i = 0; i < cnt; i++) 
    {
		tw884x_write(0x13, 0xff);
		loop = 0;
		while (!(tw884x_read(0x13) & 0x04)) 
        {
			// wait VBlank
			loop++;
			if (loop > 0xFFFE) 
            {
				///Printf("\nERR:WaitVBlank VS1");
				break;
			}
		}		
	}
}

